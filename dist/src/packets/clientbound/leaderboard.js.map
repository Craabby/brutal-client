{"version":3,"file":"leaderboard.js","sourceRoot":"","sources":["../../../../src/packets/clientbound/leaderboard.ts"],"names":[],"mappings":";;AAGA,uCAAqC;AAErC,SAAS,gBAAgB,CAAC,IAAY,EAAE,GAAQ;IAC9C,MAAM,MAAM,GAAW,IAAI,cAAM,CAAC,IAAI,CAAC,CAAC;IAExC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;IAElB,MAAM,WAAW,GAAuB,EAAE,CAAC;IAE3C,OAAO,IAAI,EAAE;QACX,MAAM,QAAQ,GAAW,MAAM,CAAC,GAAG,EAAE,CAAC;QACtC,IAAI,QAAQ,KAAK,CAAC;YAAE,MAAM,CAAC,kBAAkB;QAE7C,MAAM,KAAK,GAAW,MAAM,CAAC,GAAG,EAAE,CAAC;QACnC,MAAM,IAAI,GAAW,MAAM,CAAC,MAAM,EAAE,CAAC;QAErC,MAAM,KAAK,GAAqB;YAC9B,EAAE,EAAE,QAAQ;YACZ,KAAK;YACL,IAAI;SACL,CAAC;QACF,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACzB;IAED,MAAM,SAAS,GAAQ,EAAE,CAAC,CAAC,iCAAiC;IAE5D,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;IAEhC,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;QAC1B,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC;QACjB,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;QAC/B,SAAS,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;QAClC,SAAS,CAAC,kBAAkB,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;QAC5C,SAAS,CAAC,UAAU,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;KACrC;SAAM;QACL,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;QAClB,SAAS,CAAC,SAAS,GAAG,CAAC,CAAC;QACxB,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC;KACxB;IAED,OAAO;QACL,IAAI,EAAE,aAAa;QACnB,IAAI,EAAE;YACJ,WAAW;YACX,SAAS;SACV;KACF,CAAC;AACJ,CAAC;AAED,kBAAe,gBAAgB,CAAC;AAChC,MAAM,CAAC,OAAO,GAAG,gBAAgB,CAAC","sourcesContent":["import ParsedClientboundPacket from \"../../interfaces/parsedClientboundPacket\";\nimport LeaderboardEntry from \"../../interfaces/leaderboardEntry\";\nimport Leaderboard from \"../../interfaces/leaderboard\";\nimport { Reader } from \"../../coder\";\n\nfunction parseLeaderboard(data: Buffer, bot: any): Leaderboard {\n  const reader: Reader = new Reader(data);\n\n  reader.offset = 1;\n\n  const leaderboard: LeaderboardEntry[] = [];\n\n  while (true) {\n    const playerId: number = reader.u16();\n    if (playerId === 0) break; // null terminated\n\n    const score: number = reader.u32();\n    const name: string = reader.string();\n\n    const entry: LeaderboardEntry = {\n      id: playerId,\n      score,\n      name,\n    };\n    leaderboard.push(entry);\n  }\n\n  const otherInfo: any = {}; // never claimed to be good at ts\n\n  otherInfo.yourId = reader.u16();\n\n  if (otherInfo.yourId !== 0) {\n    bot.alive = true;\n    otherInfo.score = reader.u32();\n    otherInfo.yourRank = reader.u16();\n    otherInfo.everyScoreCombined = reader.u32();\n    otherInfo.scoreOnMap = reader.u32();\n  } else {\n    bot.alive = false;\n    otherInfo.yourScore = 0;\n    otherInfo.yourRank = 0;\n  }\n\n  return {\n    type: \"leaderboard\",\n    data: {\n      leaderboard,\n      otherInfo,\n    },\n  };\n}\n\nexport default parseLeaderboard;\nmodule.exports = parseLeaderboard;\n"]}
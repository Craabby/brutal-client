{"version":3,"file":"leaderboard.js","sourceRoot":"","sources":["../../../../src/packets/clientbound/leaderboard.ts"],"names":[],"mappings":";;AAGA,uCAAoC;AAEpC,SAAS,gBAAgB,CACvB,IAAY,EACZ,GAAQ;IAER,MAAM,MAAM,GAAW,IAAI,cAAM,CAAC,IAAI,CAAC,CAAA;IAEvC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;IAEjB,MAAM,WAAW,GAAuB,EAAE,CAAA;IAE1C,OAAO,IAAI,EAAE;QACX,MAAM,QAAQ,GAAW,MAAM,CAAC,GAAG,EAAE,CAAA;QACrC,IAAI,QAAQ,KAAK,CAAC;YAAE,MAAK,CAAC,kBAAkB;QAE5C,MAAM,KAAK,GAAW,MAAM,CAAC,GAAG,EAAE,CAAA;QAClC,MAAM,IAAI,GAAW,MAAM,CAAC,MAAM,EAAE,CAAA;QAEpC,MAAM,KAAK,GAAqB;YAC9B,EAAE,EAAE,QAAQ;YACZ,KAAK;YACL,IAAI;SACL,CAAA;QACD,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;KACxB;IAED,MAAM,SAAS,GAAQ,EAAE,CAAA,CAAC,iCAAiC;IAE3D,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA;IAE/B,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;QAC1B,GAAG,CAAC,KAAK,GAAG,IAAI,CAAA;QAChB,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA;QAC9B,SAAS,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA;QACjC,SAAS,CAAC,kBAAkB,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA;QAC3C,SAAS,CAAC,UAAU,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA;KACpC;SAAM;QACL,GAAG,CAAC,KAAK,GAAG,KAAK,CAAA;QACjB,SAAS,CAAC,SAAS,GAAG,CAAC,CAAA;QACvB,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAA;KACvB;IAED,OAAO;QACL,IAAI,EAAE,aAAa;QACnB,IAAI,EAAE;YACJ,WAAW;YACX,SAAS;SACV;KACF,CAAA;AACH,CAAC;AAED,kBAAe,gBAAgB,CAAA;AAC/B,MAAM,CAAC,OAAO,GAAG,gBAAgB,CAAA","sourcesContent":["import ParsedClientboundPacket from \"../../interfaces/parsedClientboundPacket\"\nimport LeaderboardEntry from \"../../interfaces/leaderboardEntry\"\nimport Leaderboard from \"../../interfaces/leaderboard\"\nimport { Reader } from \"../../coder\"\n\nfunction parseLeaderboard(\n  data: Buffer,\n  bot: any\n): Leaderboard {\n  const reader: Reader = new Reader(data)\n\n  reader.offset = 1\n\n  const leaderboard: LeaderboardEntry[] = []\n\n  while (true) {\n    const playerId: number = reader.u16()\n    if (playerId === 0) break // null terminated\n\n    const score: number = reader.u32()\n    const name: string = reader.string()\n\n    const entry: LeaderboardEntry = {\n      id: playerId,\n      score,\n      name,\n    }\n    leaderboard.push(entry)\n  }\n\n  const otherInfo: any = {} // never claimed to be good at ts\n\n  otherInfo.yourId = reader.u16()\n\n  if (otherInfo.yourId !== 0) {\n    bot.alive = true\n    otherInfo.score = reader.u32()\n    otherInfo.yourRank = reader.u16()\n    otherInfo.everyScoreCombined = reader.u32()\n    otherInfo.scoreOnMap = reader.u32()\n  } else {\n    bot.alive = false\n    otherInfo.yourScore = 0\n    otherInfo.yourRank = 0\n  }\n\n  return {\n    type: \"leaderboard\",\n    data: {\n      leaderboard,\n      otherInfo,\n    },\n  }\n}\n\nexport default parseLeaderboard\nmodule.exports = parseLeaderboard\n"]}
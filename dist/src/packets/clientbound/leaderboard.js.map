{"version":3,"file":"leaderboard.js","sourceRoot":"","sources":["../../../../src/packets/clientbound/leaderboard.ts"],"names":[],"mappings":";;AAEA,uCAAoC;AAEpC,SAAS,gBAAgB,CACvB,YAAoB,EACpB,IAAY;IAEZ,MAAM,MAAM,GAAW,IAAI,cAAM,CAAC,IAAI,CAAC,CAAA;IAEvC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;IAEjB,MAAM,WAAW,GAAuB,EAAE,CAAA;IAE1C,OAAO,IAAI,EAAE;QACX,MAAM,QAAQ,GAAW,MAAM,CAAC,GAAG,EAAE,CAAA;QACrC,IAAI,QAAQ,KAAK,CAAC;YAAE,MAAK,CAAC,kBAAkB;QAE5C,IAAI,KAAK,GAAW,CAAC,CAAA;QACrB,IAAI,YAAY,KAAK,IAAI;YAAE,KAAK,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA,CAAC,6CAA6C;;YACxF,KAAK,GAAG,MAAM,CAAC,GAAG,EAAE,CAAA;QAEzB,MAAM,IAAI,GAAW,MAAM,CAAC,MAAM,EAAE,CAAA;QAEpC,MAAM,KAAK,GAAqB;YAC9B,EAAE,EAAE,QAAQ;YACZ,KAAK;YACL,IAAI;SACL,CAAA;QACD,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;KACxB;IAED,OAAO;QACL,IAAI,EAAE,aAAa;QACnB,IAAI,EAAE;YACJ,WAAW;SACZ;KACF,CAAA;AACH,CAAC;AAED,kBAAe,gBAAgB,CAAA;AAC/B,MAAM,CAAC,OAAO,GAAG,gBAAgB,CAAA","sourcesContent":["import ParsedClientboundPacket from \"../../interfaces/parsedClientboundPacket\"\nimport LeaderboardEntry from \"../../interfaces/leaderboardEntry\"\nimport { Reader } from \"../../coder\"\n\nfunction parseLeaderboard(\n  packetHeader: number,\n  data: Buffer\n): ParsedClientboundPacket {\n  const reader: Reader = new Reader(data)\n\n  reader.offset = 1\n\n  const leaderboard: LeaderboardEntry[] = []\n\n  while (true) {\n    const playerId: number = reader.u16()\n    if (playerId === 0) break // null terminated\n\n    let score: number = 0\n    if (packetHeader === 0xa5) score = reader.u16() // i really hate how this game's packets work\n    else score = reader.u32()\n\n    const name: string = reader.string() \n\n    const entry: LeaderboardEntry = {\n      id: playerId,\n      score,\n      name,\n    }\n    leaderboard.push(entry)\n  }\n\n  return {\n    type: \"leaderboard\",\n    data: {\n      leaderboard,\n    },\n  }\n}\n\nexport default parseLeaderboard\nmodule.exports = parseLeaderboard"]}